<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotedBot │ 7TV Paint</title>
    <link rel="icon" href="img/notedbotlogo.png" type="image/png">
    <link rel="stylesheet" href="./ressourcen/styles.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            <a href="home.html"><img src="img/notedbot.gif" alt="NotedBot Logo"></a>
        </div>
        <div class="navigation">
            <h1 id="title"><img src="img/notedbotlogo.png" alt="NotedBot Logo"> <span>NotedBot 7TV Paint</span> <span id="paint-name"></span></h1>
            <ul>
                <li><a onclick="alert('Du bist doch schon auf der Seite?')">Home</a></li>
                <li><a href="commands.html">Commands</a></li>
            </ul>
        </div>
        <div class="samples">
            <div id="sample1" class="paint-text">Wydios</div>
            <div id="sample2" class="paint-text">██████</div>
        </div>
    </div>
    
    <script>
        const paint = {"id":"01GZBZ2T0R0005K1FJYZ11J7EZ","name":"Tropical","function":"LINEAR_GRADIENT","angle":90,"image_url":"","repeat":false,"stops":[{"at":0,"color":-145138177},{"at":0.5,"color":-20489985},{"at":1,"color":-1124794113}],"shadows":[{"x_offset":0,"y_offset":0,"radius":4,"color":-145138177},{"x_offset":0,"y_offset":0,"radius":0.1,"color":-145138177}]};

        const convertToHex = (color) => {
            const normalizedColor = color >>> 0;
            return `#${normalizedColor.toString(16).padStart(8, '0')}`;
        };

        const createGradientStops = (stops) => {
            return stops.map(stop => `${convertToHex(stop.color)} ${stop.at * 100}%`).join(', ');
        };

        const applyGradient = (type, direction, stops, repeat) => {
            if (type.includes('radial-gradient')) {
                return `${repeat ? `repeating-${type}` : type}(${stops})`;
            }
            return `${repeat ? `repeating-${type}` : type}(${direction}, ${stops})`;
        };

        const applyShadows = (shadows) => {
            return shadows.map(shadow => {
                const colorString = convertToHex(shadow.color);
                return `drop-shadow(${shadow.x_offset}px ${shadow.y_offset}px ${shadow.radius}px ${colorString})`;
            }).join(' ');
        };

        const samplesDiv = document.querySelector('.samples');
        const sample1Div = document.getElementById('sample1');
        const sample2Div = document.getElementById('sample2');

        if (samplesDiv && paint) {
            if (paint.function === 'LINEAR_GRADIENT' && paint.stops?.length) {
                const gradientStops = createGradientStops(paint.stops);
                const gradientDirection = `${paint.angle}deg`;
                samplesDiv.style.backgroundImage = applyGradient('linear-gradient', gradientDirection, gradientStops, paint.repeat);
                sample1Div.style.color = convertToHex(paint.stops[0].color);
                sample2Div.style.color = convertToHex(paint.stops[2].color);
            } else if (paint.function === 'RADIAL_GRADIENT' && paint.stops?.length) {
                const gradientStops = createGradientStops(paint.stops);
                samplesDiv.style.backgroundImage = applyGradient('radial-gradient', '', gradientStops, paint.repeat);
                sample1Div.style.color = convertToHex(paint.stops[0].color);
                sample2Div.style.color = convertToHex(paint.stops[2].color);
            } else if (paint.function === 'URL' && paint.image_url) {
                const imageUrl = paint.image_url.replace('/1x.', '/3x.');
                samplesDiv.style.backgroundImage = `url('${imageUrl}')`;
            }

            if (paint.shadows?.length) {
                samplesDiv.style.filter = applyShadows(paint.shadows);
            } else {
                samplesDiv.style.filter = '';
            }
        }
    </script>
</body>
</html>
