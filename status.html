<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotedBot â”‚ Status</title>
    <link rel="icon" href="img/notedbotlogo.png" type="image/png">
    <link rel="stylesheet" href="./ressourcen/styles.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            <a href="home.html"><img src="img/notedbot.gif" alt="NotedBot Logo"></a>
        </div>
        <div class="navigation">
            <h1 id="title"><img src="img/notedbotlogo.png" alt="NotedBot Logo" style="color: #0036d8;"> <span style="color: #0036d8;">NotedBot</span></h1>
            <ul>
                <li><a onclick="alert('Du bist doch schon auf der Seite?')" style="color: #4876ff;">Home</a></li>
                <li><a href="commands" style="color: #4876ff;">Commands</a></li>
                <li><a href="status" style="color: #4876ff;">Status</a></li>
                <li><a href="paint?paintID=" style="color: #4876ff;">Try 7tv Paints</a></li>
                <li><a href="badge?badgeID=" style="color: #4876ff;">Try 7tv Badge</a></li>
            </ul>
        </div>
        <div id="error" style="display: none; font-size: 20px; color: #ff0000; text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <img src="img/apu.png" alt="Error Image"> 
                <span style="color: #ff0000;">
                    Error
                </span>
        </div>
        <div id="loading" style="display: none; font-size: 20px; color: #0036d8; text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <img src="img/loading.gif" alt="Loading Image"> 
                <span style="color: #0036d8;">
                    Status is Loading...
                </span>
        </div>
        <div id="status" style="display: none; text-align: center; font-size: 20px; color: #0036d8;">
            <p id="helix-requests"></p>
            <p id="ivr-requests"></p>
            <p id="updated-at"></p>
        </div>
        <script>
            async function loadStatus() {
                document.getElementById("loading").style.display = "block";
                document.getElementById("status").style.display = "none";
                document.getElementById("error").style.display = "none";

                try {
                    const response = await fetch("https://raw.githubusercontent.com/NotedBot/testtesttesttest/main/ressourcen/status.json");
                    if (!response.ok) throw new Error(`Fehler beim Abrufen: ${response.statusText}`);
                    
                    const data = await response.json();
        
                    document.getElementById("helix-requests").textContent = `Helix Requests: ${data.helix_requests}`;
                    document.getElementById("ivr-requests").textContent = `IVR Requests: ${data.ivr_requests}`;
                    document.getElementById("updated-at").textContent = `Letzte Aktualisierung: ${new Date(data.updated_at).toLocaleString()}`;

                    document.getElementById("status").style.display = "block";
                    document.getElementById("loading").style.display = "none";
                } catch (error) {
                    console.error("Fehler beim Laden des Status:", error);
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("error").style.display = "block";
                }
            }

            loadStatus();
        </script>      
    </div>
    <script src="./ressourcen/animation.js"></script>
</body>
</html>

